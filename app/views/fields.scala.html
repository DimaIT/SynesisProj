@import util.tableUtil.tables.TableRepresentation
@(table: TableRepresentation)

@main(Messages("fields")) {
    <script src="@routes.Assets.at("javascripts/dataTables.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/project.js")" type="text/javascript"></script>
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/dataTables.css")">

    <legend>@table.getMessage</legend>
    <script type="text/javascript">
        $(document).ready( function () {
            var table = $('#datatable').DataTable({
                "paging":   false,
                "stateSave" : true,
                "aoColumnDefs": [
                    { 'bSortable': false, "bSearchable": false, 'aTargets': [ @table.getColumnsCount ] }
                ]
            });
        } );
    </script>
    <div class="marker"></div>

    <table class="display dataTable" id="datatable">
        <thead>
            <tr>
                @for(col <- table.getHeader) {
                    <th>@col</th>
                }
                <th>
                    <a href="/fields/0" id="addLink">
                        <span class="glyphicon glyphicon-plus" title="Добавить"> </span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>

        @for(record <- table.getRecords) {
            <tr id="@record.getId">
                @for(col <- record.getColumns) {
                    <td>@col</td>
                }
            <td class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                    <span class="glyphicon glyphicon-chevron-down" title="Раскрыть меню">  </span></a>
                <ul class="dropdown-menu pull-right" role="menu">
                    <li>
                        <a href="/fields/@record.getId">

                            <span class="glyphicon glyphicon-pencil"> </span>
                            Редактировать
                        </a>
                    </li>
                    <li>
                        <a title="Безвозвратно удалить запись" onclick="if (confirm('Вы уверены, что хотите безвозвратно удалить запись?')) {AjaxDelete('${table.entityName}','${record.id}','${table.properties.deleteLinkUrlPostfix}')}">
                            <span class="glyphicon glyphicon-trash"> </span>
                            Удалить
                        </a>
                    </li>
                </ul>
            </td>
            </tr>
        }
        </tbody>
    </table>
}